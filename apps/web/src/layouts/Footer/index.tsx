import Link from 'next/link';

import LogoLink from '@/src/components/ui/LogoLink';
import { fetchWithLogging } from '@/src/global/sanity/client';
import { queryFooter } from '@/src/global/sanity/query';
import type { QueryFooterResult } from '@/src/global/sanity/sanity.types';

import NewsletterForm from './NewsletterForm';
import styles from './styles.module.scss';

export default async function Footer() {
  const footerData = await fetchWithLogging<QueryFooterResult>({
    label: 'Footer fetch failed',
    query: queryFooter,
    tags: ['footer'],
  });

  return (
    <footer className={`${styles.footer} max-width-block`}>
      <div className={styles.logoContainer}>
        <LogoLink />
        <nav className={styles.socialMedia}>
          {footerData?.highlightedSocialMedia?.map((socialMedia) => (
            <Link
              key={socialMedia.name}
              href={socialMedia.link!}
              target="_blank"
              rel="noreferrer"
              dangerouslySetInnerHTML={{ __html: socialMedia.iconString! }}
              aria-label={`Odwiedź nasz ${socialMedia.name}`}
            ></Link>
          ))}
        </nav>
      </div>
      <nav className={styles.linksCol}>
        {footerData?.links?.slice(0, 3).map((link) => (
          <Link key={link.text} href={link.href!}>
            {link.text}
          </Link>
        ))}
      </nav>
      <nav className={styles.linksCol}>
        {footerData?.links?.slice(3).map((link) => (
          <Link key={link.text} href={link.href!}>
            {link.text}
          </Link>
        ))}
      </nav>
      <div className={styles.additionalLinks}>
        <span className={styles.copyright}>© 2025 Audiofast</span>
        <span className={styles.createdBy}>
          Stworzone przez{' '}
          <Link href="https://kryptonum.eu/pl" target="_blank" className="logo">
            Kryptonum
          </Link>
        </span>
      </div>
      <button className={styles.cookiesButton}>
        Zarządzaj plikami cookies
      </button>
      <div className={styles.newsletter}>
        <span className={styles.label}>{footerData?.newsletter?.label}</span>
        <NewsletterForm
          buttonLabel={footerData!.newsletter!.buttonLabel!}
          formStateResult={footerData!.newsletter!.formState!}
        />
      </div>
      <SignalIcon />
    </footer>
  );
}

const SignalIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1279 216" fill="none">
    <g fill="#FE0140" opacity={0.05}>
      <path d="M1273.86 140.344H-7.865c-2.834 0-5.135-.448-5.135-1s2.3-1 5.135-1H1273.86c2.84 0 5.14.448 5.14 1s-2.3 1-5.14 1Z" />
      <path d="M298.611 237.856h-.15c-5.693-.325-8.283-18.143-13.701-75.208-2.202-23.191-4.905-51.605-7.445-58.302-2.528 6.098-5.318 30.975-7.608 51.317-5.593 49.843-8.271 65.312-13.926 64.975-5.543-.325-7.871-17.418-13.001-76.033-2.239-25.502-4.98-56.902-7.72-62.8-2.502 3.736-5.38 21.467-7.507 34.649-4.93 30.425-7.671 43.745-13.552 43.383-5.355-.313-7.369-16.681-11.987-76.932-2.277-29.701-5.355-69.848-8.996-76.346-3.829 7.71-6.97 57.565-9.51 97.962-5.042 80.019-6.957 95.138-12.062 95.138-5.217 0-7.557-14.944-13.15-84.205-2.228-27.526-4.943-61.25-7.583-69.073-2.49 6.31-5.193 30.7-7.407 50.668-5.468 49.406-8.071 64.737-13.764 64.4-5.556-.325-8.321-12.92-13.313-41.584-2.265-12.995-5.644-32.412-8.446-35.149-3.241 4.324-6.77 35.361-9.372 58.215-5.18 45.62-7.12 57.065-11.875 56.715-4.48-.325-6.519-10.608-11.736-48.406-2.578-18.68-6.069-44.045-9.11-47.694-2.84 2.874-6.33 23.141-8.67 36.711-4.893 28.439-7.396 40.022-12.45 40.022-5.056 0-7.796-14.932-14.19-66.262-2.415-19.392-5.38-43.12-7.57-49.08-4.041 6.772-12.738 42.158-19.37 75.095-.2 1.012-1.188 1.662-2.214 1.462a1.864 1.864 0 0 1-1.464-2.212c.038-.2 3.954-19.617 8.546-38.797 9.61-40.172 12.6-40.172 14.777-40.172 3.767 0 5.306 7.46 11.024 53.229 2.89 23.179 7.207 57.79 10.61 62.713 2.828-3.123 6.282-23.178 8.597-36.648 4.892-28.439 7.395-40.022 12.45-40.022s7.282 11.521 12.75 51.13c2.327 16.931 5.468 39.697 8.133 44.545 2.653-5.46 5.618-31.537 8.033-52.766 5.405-47.532 7.733-61.414 12.763-61.739 5.255-.35 7.57 10.284 12.475 38.46 2.377 13.67 6.331 36.361 9.647 38.385 3.654-3.711 7.457-38.085 9.997-60.976 4.88-44.058 6.72-55.14 11.262-55.14 4.542 0 6.131 11.02 11.198 73.658 2.478 30.675 5.819 71.984 9.297 79.831 3.254-8.547 6.106-53.854 8.421-90.702 5.343-84.892 7.558-102.06 13.163-102.06 5.606 0 8.058 18.106 12.838 80.394 2.353 30.638 5.255 68.598 8.696 73.358 3.266-2.274 7.095-25.877 9.397-40.109 4.505-27.814 6.657-38.322 11.449-38.322 4.53 0 6.307 10.608 11.224 66.736 2.49 28.364 5.856 66.861 9.497 72.284 3.616-4.748 7.42-38.635 9.96-61.326 4.992-44.445 6.857-55.628 11.399-55.628 4.542 0 6.056 9.371 11.111 62.688 2.628 27.739 6.194 65.237 9.96 71.272 3.879-7.984 7.395-61.901 9.997-101.723 1.514-23.216 2.941-45.145 4.48-61.738 2.515-27.177 4.254-29.138 6.832-29.138 4.604 0 6.369 11.22 11.812 75.033 2.627 30.812 6.181 72.484 9.722 79.331 3.478-6.235 6.857-42.958 9.359-70.135 5.08-55.166 6.744-64.862 11.186-64.862s6.244 11.196 11.812 74.846c2.615 29.988 6.144 70.222 9.522 78.844 3.278-10.796 6.269-66.387 8.696-111.644 1.552-28.889 3.154-58.765 4.905-80.906.939-11.958 1.852-20.742 2.778-26.864 1.339-8.897 2.553-11.758 4.968-11.758s3.541 2.749 4.817 11.77c.863 6.148 1.714 14.994 2.577 27.04 1.615 22.353 3.016 51.667 4.505 82.705 2.59 53.878 5.781 120.502 9.897 129.286 3.792-4.923 7.045-38.322 9.222-60.751 4.267-43.833 6.019-54.778 10.911-54.466 5.093.35 7.958 11.146 12.588 30.213 2.365 9.771 6.306 25.99 9.046 27.302 2.603-2.187 5.518-20.33 7.658-33.637 4.767-29.688 7.495-42.708 13.551-42.708s9.184 12.008 13.501 31.588c1.852 8.384 5.693 25.814 8.396 25.977h.062c2.841 0 6.282-10.971 8.559-18.255 3.441-10.996 6.419-20.492 11.862-20.492 5.117 0 7.107 11.995 11.499 46.281 2.265 17.731 6.031 47.132 9.822 49.881 4.017-4.773 7.345-48.119 9.797-79.944 4.818-62.525 6.657-74.333 11.562-74.333 5.155 0 7.17 14.157 11.924 66.411 2.378 26.19 5.594 61.576 9.16 67.511 3.603-7.634 6.656-55.803 9.134-94.85C609.76 17.193 611.9.574 617.255.574c2.865 0 5.093 2.55 7.795 35.599 1.664 20.33 3.091 47.744 4.48 74.258 2.215 42.184 4.942 94.201 8.371 102.572 3.328-5.36 6.619-34.723 9.071-56.502 4.993-44.52 7.057-56.578 12.05-56.578 4.992 0 7.457 11.333 11.874 39.134 2.177 13.708 5.819 36.636 9.022 37.998 2.79-.012 6.756-18.518 8.658-27.402 4.155-19.392 6.77-30.35 12.438-30.35 5.668 0 8.746 9.409 12.187 20.304 2.39 7.572 5.668 17.956 8.871 18.081h.05c3.179 0 6.745-11.221 9.122-18.668 3.454-10.846 6.432-20.205 11.862-20.442 5.468-.175 9.234 5.485 12.913 11.008 2.815 4.224 5.718 8.584 8.446 8.722 1.038.05 2.085-.001 2.035 1.036-.05 1.037-.912 1.037-2 1-4.63-.213-8.118-3.448-11.597-8.671-3.103-4.661-6.306-9.521-9.634-9.334-2.816.112-6.207 10.771-8.446 17.831-3.679 11.545-6.882 21.504-12.901 21.266-5.843-.237-8.834-9.721-12.3-20.704-2.352-7.46-5.58-17.681-8.608-17.681-3.028 0-6.857 18.505-8.759 27.39-4.154 19.392-6.769 30.35-12.437 30.35-5.669 0-8.084-12.532-12.638-41.134-2.09-13.195-5.218-32.862-8.021-35.748-2.99 4.186-6.143 32.3-8.458 53.016-5.255 46.832-7.608 60.452-13.076 60.452-2.84 0-4.905-2.399-7.495-34.437-1.589-19.68-2.99-46.432-4.354-72.309-2.252-42.87-5.018-95.612-8.571-105.271-3.504 8.946-6.494 55.978-8.909 94.238-5.23 82.618-7.395 99.311-12.875 98.936-5.593-.312-7.896-16.393-12.901-71.497-2.29-25.177-5.105-56.128-8.12-62.275-3.003 6.747-5.694 41.721-7.883 70.147-4.98 64.712-7.345 83.53-13.376 83.53s-8.972-16.244-13.714-53.292c-2.177-17.056-5.155-40.309-7.995-42.995-2.641.562-5.894 10.92-8.058 17.83-3.567 11.396-6.695 21.217-12.45 20.879-5.268-.337-7.808-10.67-11.825-28.913-2.365-10.709-6.319-28.651-9.835-28.651-.075.012-2.064.474-4.829 12.082-1.827 7.647-3.441 17.731-5.005 27.477-4.267 26.577-6.382 36.848-11.237 36.848h-.237c-5.106-.35-7.958-11.146-12.588-30.213-2.315-9.534-6.119-25.215-8.846-27.177-2.691 4.023-5.218 29.951-7.258 50.918-4.792 49.255-7.244 64.587-13.263 64.587-2.29 0-3.754-2.012-5.393-13.045-1.013-6.897-1.989-16.769-2.99-30.176-1.84-24.815-3.429-57.99-4.968-90.077-2.352-48.993-4.992-103.997-8.183-116.13-3.378 12.196-6.406 68.336-8.859 114.156-4.079 75.933-6.456 112.106-10.598 115.792a2.485 2.485 0 0 1-1.802.65c-4.955-.313-7.32-15.144-13.301-83.53-2.427-27.839-5.405-61.9-8.12-70.11-2.553 7.41-5.218 36.411-7.408 60.139-5.28 57.427-7.645 74.121-13.15 74.121-5.18 0-7.558-14.794-13.414-83.343-2.352-27.601-5.23-61.288-7.97-69.985-2.728 9.984-5.443 51.668-7.67 85.754-5.706 87.516-8.021 105.771-13.589 105.784l.025.037Z" />
      <path d="M337.476 165.16c-5.706 0-8.897-8.209-11.987-16.131-2.453-6.298-4.98-12.808-8.271-12.808h-.038c-3.716.063-7.132 3.599-10.448 7.01-3.491 3.599-7.094 7.322-11.336 7.397h-.1c-4.079 0-6.919-4.423-9.935-9.109-3.153-4.923-6.431-10.008-11.174-10.008-4.742 0-8.033 3.723-11.198 7.322-3.041 3.449-6.181 7.01-10.573 7.085-4.492.087-7.796-2.524-10.936-5.036-3.003-2.399-5.831-4.661-9.673-4.661-3.541 0-6.231 5.261-9.071 10.834-3.341 6.522-6.782 13.27-12.413 13.27-5.63 0-8.933-10.634-12.099-20.917-2.678-8.709-5.456-17.731-9.097-17.731-3.641 0-6.644 8.022-9.459 15.781-3.178 8.747-6.469 17.806-11.724 17.881h-.05c-5.181 0-8.234-12.045-11.462-24.79-2.828-11.158-6.031-23.803-10.223-23.803-4.191 0-7.182 14.106-9.797 26.552-3.003 14.356-5.606 26.764-10.586 26.764s-8.458-7.659-11.774-15.081c-2.94-6.573-5.993-13.37-9.609-13.37-3.617 0-6.52 4.423-9.485 9.109-3.178 5.01-6.469 10.183-11.311 10.183-4.843 0-7.946-3.786-11.074-7.447-3.078-3.598-5.993-7.01-10.122-7.01-4.13 0-7.02 2.237-10.01 4.611-3.066 2.424-6.232 4.936-10.974 4.986h-.125c-4.767 0-8.083-2.612-11.299-5.136-3.015-2.374-5.868-4.611-9.772-4.648-4.267-.075-7.708 1.249-11.049 2.499-3.115 1.175-6.344 2.387-10.135 2.437a.625.625 0 0 1-.626-.613c0-.35.276-.624.614-.637 3.566-.037 6.544-1.162 9.71-2.349 3.44-1.3 7.019-2.649 11.498-2.587 4.33.05 7.483 2.524 10.536 4.924 3.178 2.499 6.194 4.86 10.523 4.86h.125c4.304-.037 7.17-2.311 10.21-4.711 3.028-2.399 6.169-4.885 10.786-4.885s7.946 3.786 11.074 7.447c3.078 3.599 5.993 7.01 10.122 7.01 4.13 0 7.245-4.886 10.248-9.609 3.028-4.761 6.156-9.684 10.548-9.684s7.508 6.86 10.748 14.107c3.153 7.047 6.419 14.345 10.636 14.345 3.954 0 6.832-13.695 9.359-25.765 2.966-14.157 5.769-27.539 11.011-27.539 5.243 0 8.209 12.02 11.437 24.752 2.828 11.183 6.031 23.841 10.248 23.841h.025c4.391-.063 7.52-8.697 10.56-17.056 3.103-8.534 6.031-16.606 10.636-16.606 4.604 0 7.219 8.622 10.285 18.605 2.89 9.384 6.169 20.03 10.898 20.03 4.73 0 8.134-6.397 11.299-12.583 3.028-5.922 5.881-11.508 10.185-11.508 4.305 0 7.42 2.512 10.461 4.936 3.103 2.487 6.006 4.836 10.135 4.761 3.841-.063 6.657-3.262 9.647-6.66 3.354-3.811 6.832-7.747 12.137-7.747 5.306 0 8.884 5.373 12.225 10.583 2.84 4.423 5.493 8.634 8.959 8.534 3.716-.062 7.145-3.598 10.448-7.009 3.491-3.599 7.095-7.323 11.324-7.398h.062c4.155 0 6.72 6.61 9.435 13.608 2.79 7.184 5.956 15.344 10.811 15.344 4.855 0 7.945-17.219 10.848-32.4 3.629-18.955 6.156-30.463 10.636-30.463 4.479 0 7.382 11.32 11.386 29.951 2.84 13.219 6.056 28.201 9.772 28.201h.025c3.979-.063 7.696-10.683 10.961-20.055 3.504-10.046 6.544-18.717 10.536-18.717 3.991 0 6.707 7.509 9.91 16.218 3.053 8.297 6.519 17.706 10.686 17.706 4.166 0 7.745-10.621 10.948-20.005 3.441-10.071 6.406-18.767 10.536-18.767 4.129 0 6.856 10.545 10.035 22.766 3.128 11.982 6.656 25.565 11.111 25.565h.037c4.567-.063 8.183-9.584 11.362-17.993 3.19-8.41 5.943-15.669 9.834-15.669 3.892 0 6.77 6.435 10.098 13.869 3.266 7.285 6.982 15.557 11.374 15.469 4.317-.062 7.683-9.683 10.661-18.18 3.14-8.959 5.843-16.694 9.947-16.694 4.104 0 6.969 4.599 10.123 9.484 3.24 4.998 6.594 10.184 10.973 10.184h.088c4.029-.063 6.882-9.372 9.634-18.381 3.166-10.345 6.157-20.129 11.562-20.129 5.405 0 8.584 12.42 11.899 25.577 2.703 10.734 5.769 22.891 9.585 22.891 4.167 0 7.62-10.733 10.686-20.204 3.19-9.896 5.956-18.43 9.922-18.43 3.967 0 6.707 6.372 9.973 13.757 3.178 7.184 6.781 15.319 11.161 15.319h.05c4.329-.063 7.758-4.986 11.061-9.747 3.428-4.923 6.619-9.571 11.023-9.508 4.617.075 8.159 7.859 11.574 15.394 2.991 6.597 6.094 13.407 9.26 13.407h.037c3.241-.063 6.407-5.823 9.472-11.383 3.441-6.248 7.007-12.708 11.437-12.708 4.429 0 7.77 5.036 11.111 9.896 3.166 4.599 6.431 9.359 10.085 9.359 3.879 0 8.07-8.409 11.774-15.819 3.541-7.109 6.607-13.257 9.71-13.257 6.018 0 20.358 17.606 21.972 19.617a.618.618 0 0 1-.1.875.619.619 0 0 1-.876-.1c-4.292-5.323-16.417-19.155-20.996-19.155-2.34 0-5.518 6.385-8.596 12.558-4.042 8.122-8.233 16.518-12.888 16.518-4.304 0-7.758-5.035-11.111-9.896-3.166-4.598-6.432-9.359-10.085-9.359-3.654 0-7.07 6.135-10.336 12.071-3.391 6.147-6.581 11.957-10.548 12.032-3.954.088-7.132-6.834-10.46-14.144-3.116-6.847-6.632-14.607-10.461-14.669h-.075c-3.666 0-6.694 4.36-9.91 8.971-3.491 5.023-7.094 10.209-12.074 10.284h-.075c-5.193 0-8.809-8.172-12.3-16.069-2.828-6.398-5.756-13.007-8.821-13.007-3.066 0-6.069 9.333-8.722 17.568-3.503 10.833-6.806 21.066-11.874 21.066-4.792 0-7.583-11.045-10.798-23.84-2.903-11.546-6.207-24.628-10.686-24.628-4.48 0-7.47 9.784-10.36 19.242-3.016 9.871-5.881 19.193-10.811 19.268h-.1c-5.068 0-8.596-5.461-12.025-10.746-2.965-4.586-5.768-8.909-9.071-8.909-3.304 0-6.044 8.059-8.772 15.856-3.266 9.309-6.631 18.943-11.824 19.018h-.075c-5.193 0-8.884-8.247-12.463-16.219-2.903-6.46-5.893-13.132-8.959-13.132-3.065 0-5.893 7.547-8.658 14.856-3.491 9.209-7.107 18.718-12.525 18.793h-.05c-5.418 0-8.772-12.87-12.325-26.502-2.665-10.233-5.681-21.829-8.821-21.829-3.141 0-6.495 9.521-9.36 17.931-3.654 10.72-7.107 20.841-12.124 20.841-5.018 0-8.522-9.421-11.862-18.53-2.778-7.572-5.656-15.394-8.734-15.394-3.078 0-6.419 9.496-9.347 17.881-3.741 10.708-7.27 20.817-12.125 20.891h-.037c-4.405 0-7.095-11.033-10.999-29.188-2.915-13.582-6.218-28.964-10.16-28.964-3.941 0-6.757 15.644-9.409 29.451-3.291 17.181-6.407 33.412-12.087 33.412h.05Z" />
    </g>
  </svg>
);
