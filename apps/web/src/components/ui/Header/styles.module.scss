.skipLink {
  position: fixed;
  top: 2.5rem;
  opacity: 0;
  visibility: hidden;
  left: 2.5rem;
  z-index: 1110;
  font-size: var(--typography-body-m);
  line-height: 1.2;
  letter-spacing: -0.01em;
  color: var(--neutral-white);
  background: var(--neutral-black, #000);
  text-decoration: none;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  border: 0.125rem solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 0.25rem 1rem rgba(255, 255, 255, 0.3);
  pointer-events: none;
  transition:
    transform 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
    box-shadow 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &:focus-visible {
    outline: 0.125rem solid var(--neutral-white);
    outline-offset: 0.125rem;
    box-shadow:
      0 0.25rem 1rem rgba(0, 0, 0, 0.3),
      0 0 0 0.25rem rgba(255, 255, 255, 0.1);
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
}

.header {
  position: sticky;
  top: 0;
  background-color: var(--neutral-black, #000);
  z-index: 1001;
  min-height: 4.75rem;

  // Halo/shadow effect using pseudo-element
  &::before {
    content: "";
    position: absolute;
    top: -3.125rem;
    left: 50%;
    transform: translateX(-50%);
    width: clamp(50rem, calc(81.375vw / 0.48), 81.375rem);
    height: 6.4375rem;
    background: radial-gradient(
      ellipse at center,
      rgba(48, 48, 48, 0.4) 0%,
      transparent 70%
    );
    filter: blur(1rem);
    pointer-events: none;
    z-index: -1;
  }

  .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem clamp(1rem, calc(2vw / 0.48), 2rem);
    margin: 0 auto;
    max-width: 85.375rem;
    > a:first-child {
      margin-bottom: 2px;
    }
  }

  // Desktop Navigation
  .nav {
    display: flex;
    align-items: center;
    gap: clamp(1rem, calc(1vw / 0.48), 2rem);
  }

  .navLink {
    // Desktop nav links - always focusable and interactive
    font-family: var(--font-family-poppins);
    font-weight: 400;
    line-height: 1.16;
    letter-spacing: -0.03em;
    color: var(--neutral-white);
    text-decoration: none;
    padding: 0.75rem clamp(0.5rem, calc(0.75vw / 0.48), 1rem);
    border-radius: 0.25rem;
    position: relative;
    z-index: 1;
    transition: color 320ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

    // Subtle background glow effect that scales
    &::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.08);
      border-radius: inherit;
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.7);
      transition:
        opacity 280ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 280ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
      z-index: -1;
    }

    &:hover {
      &::before {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.05);
      }
    }

    &:active {
      &::before {
        transform: translate(-50%, -50%) scale(0.95);
        transition-duration: 150ms;
      }
    }

    &:focus-visible {
      outline: 0.125rem solid var(--neutral-white);

      border-radius: 0.25rem;
    }
  }

  // Mobile responsive behavior
  @media (max-width: 43.6875rem) {
    .mobileMenuButton {
      display: flex;
    }

    .nav {
      position: fixed;
      top: 0;
      right: 0;
      width: min(22rem, 85vw); // Max 352px or 85% of viewport
      height: 100vh;
      background: rgba(0, 0, 0, 0.92);
      backdrop-filter: blur(1.25rem);
      border-left: 0.0625rem solid rgba(255, 255, 255, 0.12);
      padding: clamp(2.5rem, 6vw, 4rem) clamp(1.5rem, 4vw, 2.5rem);
      padding-top: clamp(6rem, 12vw, 8rem); // Space for header
      transform: translateX(100%); // Initially hidden to the right
      transition: transform 380ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
      z-index: 998; // Below menu button
      overflow-y: auto;
      box-shadow: -0.75rem 0 2rem rgba(0, 0, 0, 0.4);

      // Sidebar nav layout
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      gap: 0.75rem;
    }

    .navLink {
      font-family: var(--font-family-poppins);
      font-size: 1.25rem;
      font-weight: 300;
      line-height: 1.3;
      letter-spacing: -0.01em;
      color: var(--neutral-300);
      text-decoration: none;
      text-align: left;
      padding: clamp(0.875rem, 3vw, 1.25rem) clamp(1rem, 3vw, 1.5rem);
      border-radius: 0.5rem;
      width: 100%;
      opacity: 0;
      transform: translateX(1.5rem);
      transition:
        color 280ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
        background-color 280ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
        opacity 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

      // Staggered animation delays for each link
      &:nth-child(1) {
        transition-delay: 100ms;
      }
      &:nth-child(2) {
        transition-delay: 160ms;
      }
      &:nth-child(3) {
        transition-delay: 220ms;
      }
      &:nth-child(4) {
        transition-delay: 280ms;
      }
      &:nth-child(5) {
        transition-delay: 340ms;
      }
      &:nth-child(6) {
        transition-delay: 400ms;
      }

      &:hover {
        color: var(--neutral-white);
        background-color: rgba(255, 255, 255, 0.08);
      }

      &::before {
        display: none; // Disable desktop hover effect on mobile
      }

      &:focus-visible {
        outline: 0.125rem solid var(--neutral-white);
        outline-offset: 0.125rem;
      }
    }

    .mobileBackdrop {
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(0.1875rem);
      z-index: 997; // Below navigation
      animation: backdropFadeIn 320ms cubic-bezier(0.25, 0.46, 0.45, 0.94)
        forwards;
    }
  }
}

// Navigation Wrapper
.navWrapper {
  position: relative;
  display: flex;
  align-items: center;
}

// Mobile Menu Button (hidden on desktop)
.mobileMenuButton {
  display: none;
  align-items: center;
  gap: 0.5rem;
  font-family: var(--font-family-poppins);
  font-size: 1rem;
  font-weight: 300;
  color: var(--neutral-300);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border-radius: 0.25rem;
  position: relative;
  z-index: 1000; // Higher than navigation (998) to stay on top
  transition: color 320ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &:hover {
    color: var(--neutral-white);
  }

  &:focus-visible {
    outline: 0.125rem solid var(--neutral-white);
    outline-offset: 0.125rem;
  }

  &[aria-expanded="true"] {
    color: var(--neutral-white);
  }
}

.menuButtonText {
  font-size: inherit;
  position: relative;
  overflow: hidden;
  min-width: 4rem; // Ensure consistent width for both texts (increased for "Zamknij")
  text-align: left;
}

// Individual text spans for sliding animation
.menuText,
.closeText {
  display: block;
  transition:
    transform 320ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
    opacity 280ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.menuText {
  transform: translateX(0);
  opacity: 1;
  text-align: right;
}

.closeText {
  position: absolute;
  top: 0;
  left: 0;
  transform: translateX(1.5rem);
  opacity: 0;
}

// Hamburger Icon
.menuButtonIcon {
  display: flex;
  flex-direction: column;
  gap: 0.1875rem;
  width: 1rem;

  span {
    height: 0.125rem;
    background: currentColor;
    border-radius: 0.0625rem;
    transition:
      transform 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
      opacity 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94);

    &:nth-child(1) {
      width: 100%;
    }
    &:nth-child(2) {
      width: 80%;
    }
    &:nth-child(3) {
      width: 60%;
    }
  }
}

// Mobile Menu Open State (triggered by global class)
:global(.mobile-nav-open) {
  .nav {
    @media (max-width: 43.6875rem) {
      transform: translateX(0); // Slide in from right
    }
  }

  .navLink {
    @media (max-width: 43.6875rem) {
      opacity: 1;
      transform: translateX(0); // Slide in from right
    }
  }

  .mobileBackdrop {
    @media (max-width: 43.6875rem) {
      opacity: 1;
      visibility: visible;
    }
  }

  .menuText {
    transform: translateX(-1.5rem);
    opacity: 0;
  }

  .closeText {
    transform: translateX(0);
    opacity: 1;
  }

  .menuButtonIcon {
    span {
      &:nth-child(1) {
        transform: translateY(0.3125rem) rotate(45deg);
        width: 100%;
      }
      &:nth-child(2) {
        opacity: 0;
        transform: scale(0);
        width: 100%;
      }
      &:nth-child(3) {
        transform: translateY(-0.3125rem) rotate(-45deg);
        width: 100%;
      }
    }
  }
}

// Backdrop fade-in animation
@keyframes backdropFadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(0.1875rem);
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .skipLink {
    transition: none;
  }
  .navLink {
    transition: none;

    &::before {
      transition: none;
    }
  }

  .mobileMenuButton {
    transition: none;
  }

  .menuButtonIcon span {
    transition: none;
  }

  .menuText,
  .closeText {
    transition: none;
  }

  .mobileBackdrop {
    animation: none;
  }

  .nav {
    transition: none;
  }

  .header::before {
    filter: none;
  }
}
